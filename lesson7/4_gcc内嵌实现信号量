
无论是原子操作，还是自旋锁，都不适合长时间等待的情况，
xchg :在单核cpu内部是原子的
但是在多核的情况下: xchg 就不一定了
多核情况下,需要使用lock命令 锁住总线


自旋锁: 一直处于忙等待,
信号量: 用来解决时空冲突